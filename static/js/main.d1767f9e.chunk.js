(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,n){e.exports=n.p+"static/media/d4.47a22d03.svg"},137:function(e,t,n){e.exports=n.p+"static/media/perspective-dice-six.d746d684.svg"},138:function(e,t,n){e.exports=n.p+"static/media/dice-eight-faces-eight.6e85915b.svg"},139:function(e,t,n){e.exports=n.p+"static/media/d12.bfe5934e.svg"},140:function(e,t,n){e.exports=n.p+"static/media/dice-twenty-faces-twenty.aeb518c5.svg"},141:function(e,t,n){e.exports=n.p+"static/media/rolling-dices.79d6d7d5.svg"},163:function(e,t,n){e.exports=n(301)},168:function(e,t,n){},300:function(e,t,n){},301:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(27),o=n.n(r),c=(n(168),n(41)),u=n(49),s=n(8),l=n(9),m=n(19),h=n(17),d=n(40),f=n(20),v=n(21),b=function(){function e(t){var n=t.dieType,a=t.explodeThreshold,i=t.name,r=t.image;Object(s.a)(this,e),this.dieType=n,this.name=i,this.image=r,this.explodeThreshold=a,this.clone=this.clone.bind(this),this.roll=this.roll.bind(this),this.countFaces=this.countFaces.bind(this),this.getNumFaces=this.getNumFaces.bind(this)}return Object(l.a)(e,[{key:"clone",value:function(){return new e({dieType:this.dieType,explodeThreshold:this.explodeThreshold,name:this.name,image:this.image})}},{key:"roll",value:function(){return new Error("Not implemented")}},{key:"countFaces",value:function(){return new Error("Not implemented")}},{key:"getNumFaces",value:function(){return Array.from(this.countFaces().values()).reduce(function(e,t){return e+t},0)}}]),e}();function p(e,t){return null===e||void 0===e?t:e}var y=function(){function e(t){var n=t.primaryValue,a=t.secondaryValues,i=t.name;Object(s.a)(this,e),this.primaryValue=p(n,[]),this.secondaryValues=p(a,[]),this.name=void 0===i&&void 0!==n?n.toString():i,this.clone=this.clone.bind(this)}return Object(l.a)(e,[{key:"clone",value:function(){return new e({primaryValue:this.primaryValue,secondaryValues:this.secondaryValues.map(function(e){return e.clone()}),name:this.name})}}]),e}(),O=function(){function e(t){var n=t.dieFace,a=t.count;Object(s.a)(this,e),this.dieFace=n,this.count=a,this.clone=this.clone.bind(this)}return Object(l.a)(e,[{key:"clone",value:function(){return new e({dieFace:this.dieFace.clone(),count:this.count})}}]),e}();function g(e,t){return Math.floor(Math.random(t-e+1))+e}var w=n(135),j=n.n(w),C=n(136),E=n.n(C),x=n(137),D=n.n(x),k=n(138),P=n.n(k),V=n(90),S=n.n(V),T=n(139),F=n.n(T),M=n(140),N=n.n(M),A=n(141),I=n.n(A),_=function(e){function t(e){var n;Object(s.a)(this,t),n=Object(m.a)(this,Object(h.a)(t).call(this,Object(v.a)({dieType:"numeric"},e)));var a=e.minValue,i=e.maxValue,r=e.numSides;if(r?(n.minValue=1,n.maxValue=r):(n.minValue=a,n.maxValue=i),void 0===e.name&&(n.name="d".concat(n.maxValue)),!n.image)switch(n.maxValue){case 4:n.image=E.a;break;case 6:n.image=D.a;break;case 8:n.image=P.a;break;case 10:case 100:n.image=S.a;break;case 12:n.image=F.a;break;case 20:n.image=N.a;break;default:n.image=I.a}return n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"clone",value:function(){return new t({minValue:this.minValue,maxValue:this.maxValue,numSides:this.numSides,explodeThreshold:this.explodeThreshold,name:this.name})}},{key:"roll",value:function(){var e=g(this.minValue,this.maxValue);return new y({primaryValue:e})}},{key:"countFaces",value:function(){var e=new Map;return j.a.range(this.minValue,this.maxValue+1).forEach(function(t){var n=new y({primaryValue:t});e.has(n.name)?e.get(n.name).count++:e.set(n.name,new O({dieFace:n,count:1}))}),e}},{key:"getNumFaces",value:function(){return this.maxValue-this.minValue+1}}]),t}(b),B=function(e){function t(e){var n;Object(s.a)(this,t),n=Object(m.a)(this,Object(h.a)(t).call(this,e));var a=e.threshold;return n.threshold=a,n.clone=n.clone.bind(Object(d.a)(n)),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"clone",value:function(){return new t({minValue:this.minValue,maxValue:this.maxValue,numSides:this.numSides,explodeThreshold:this.explodeThreshold,name:this.name,threshold:this.threshold})}},{key:"roll",value:function(){var e=g(this.minValue,this.maxValue)>=this.threshold?1:0;return new y({primaryValue:e})}},{key:"enumerateFaces",value:function(){var e=new Map,t=this.maxValue-this.threshold+1,n=this.threshold-this.minValue,a=new y({primaryValue:1}),i=new y({primaryValue:0});return e.set(a.name,t),e.set(i.name,n),e}}]),t}(_),R=function(){function e(t){var n=t.name,a=t.count;Object(s.a)(this,e),this.name=n,this.count=a,this.clone=this.clone.bind(this)}return Object(l.a)(e,[{key:"clone",value:function(){return new e({name:this.name,count:this.count})}}]),e}(),L=function(){function e(t){var n=t.diceCounts,a=t.staticBonus,i=t.staticSecondaryBonuses,r=t.name;Object(s.a)(this,e),this.staticBonus=p(a,0),this.staticSecondaryBonuses=i,this.name=r,this.diceCounts=n.slice(),this.addDice=this.addDice.bind(this),this.removeDice=this.removeDice.bind(this),this.clone=this.clone.bind(this)}return Object(l.a)(e,[{key:"addDice",value:function(e,t){t=p(t,1);var n=this.diceCounts.find(function(t){return t.name===e.name}),a=(n?n.count:0)+t;n?n.count++:this.diceCounts.push(new R({name:e.name,count:a}))}},{key:"removeDice",value:function(e,t){var n=this.diceCounts.find(function(t){return t.name===e.name}),a=(n?n.count:0)-t;n?n.count=a:this.diceCounts.push(new R({name:e.name,count:a}))}},{key:"clone",value:function(){return new e({diceCounts:this.diceCounts.slice(),staticBonus:this.staticBonus,staticSecondaryBonuses:this.staticSecondaryBonuses,name:this.name})}}]),e}(),z=n(153),J=(n(174),"SET_STATISTICS"),W="RESET_STATISTICS";function q(){return function(e){var t=ye.getState(),n=function(e,t){var n,a=e.diceCounts;if(0===a.length)throw new Error("Attempting to calculate probabilities with no dice");return a.filter(function(e){var n=e.count,a=e.name;return n>0&&t.has(a)}).reduce(function(e,n){var a=n.count,i=n.name,r=t.get(i);return e.concat(new Array(a).fill(r))},[]).forEach(function(e,t){var a=new Map,i=e.countFaces(),r=e.getNumFaces();if(0===t){var o=!0,c=!1,u=void 0;try{for(var s,l=i.values()[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var m=s.value,h=m.count,d=m.dieFace.primaryValue;a.set(d,h/r),0}}catch(F){c=!0,u=F}finally{try{o||null==l.return||l.return()}finally{if(c)throw u}}}else{var f=!0,v=!1,b=void 0;try{for(var p,y=n.entries()[Symbol.iterator]();!(f=(p=y.next()).done);f=!0){var O=p.value,g=Object(z.a)(O,2),w=g[0],j=g[1],C=!0,E=!1,x=void 0;try{for(var D,k=i.values()[Symbol.iterator]();!(C=(D=k.next()).done);C=!0){var P=D.value;h=P.count,d=P.dieFace.primaryValue,0;var V=w+d,S=j*(h/r),T=a.get(V)||0;a.set(V,T+S)}}catch(F){E=!0,x=F}finally{try{C||null==k.return||k.return()}finally{if(E)throw x}}}}catch(F){v=!0,b=F}finally{try{f||null==y.return||y.return()}finally{if(v)throw b}}}n=a}),n}(t.dicePoolStore.currentDicePool,t.diceDefinitionStore.definitions);if(void 0!==n){var a=Array.from(n.keys()).sort(function(e,t){return e<t?-1:e>t?1:0}).reverse(),i=new Map;return a.reduce(function(e,t){var a=n.get(t)+e;return i.set(t,a),a},0),e(function(e,t){return{type:J,probabilities:e,cumulativeProbabilities:t}}(n,i))}}}var H="CHOOSE_POOL_NAME",Y="ADD_DIE_TO_POOL",$="REMOVE_DIE_FROM_POOL";function G(){var e=function(){var e=new Map;return e=new Map([].concat(Object(u.a)(e),Object(u.a)(function(){var e=new Map,t=new B({name:"ArkhamDie",numSides:6,threshold:5});e.set(t.name,t);var n=new B({name:"ArkhamCurseDie",numSides:6,threshold:6});e.set(n.name,n);var a=new B({name:"ArkhamBlessDie",numSides:6,threshold:4});return e.set(a.name,a),e}()))),e=new Map([].concat(Object(u.a)(e),Object(u.a)(function(){var e=new Map;return[4,6,8,10,12,20,100].forEach(function(t){var n=new _({numSides:t});e.set(n.name,n)}),e}())))}(),t=new Map,n=function(){var e=[4,6,8,10,12,20].map(function(e){return{count:0,name:"d".concat(e)}});return new L({diceCounts:e,name:"D&D"})}();t.set(n.name,n);var a=function(e){var t=Array.from(e.values()).filter(function(e){return e.name.includes("Arkham")}).map(function(e){return{name:e.name,count:0}});return new L({diceCounts:t,name:"Arkham"})}(e);return t.set(a.name,a),{diceDefinitions:e,dicePools:t,currentName:n.name}}function K(e,t){return function(n){return Promise.resolve(n(function(e,t){return{type:Y,definition:e,count:t}}(e,t))).then(function(){n(q())})}}function Q(e,t){return function(n){return Promise.resolve(n(function(e,t){return{type:$,definition:e,count:t}}(e,Math.abs(t)))).then(function(){n(q())})}}var U=n(304),X=(n(50),n(152)),Z=n(97),ee=n(154),te=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.value,a=e.min,r=e.max;return i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement(Z.a,{size:"big",name:"minus",onClick:function(){n>a&&t(n-1)}}),i.a.createElement(ee.a,{size:"big",type:"text",className:"number"},n),i.a.createElement(Z.a,{size:"big",name:"plus",onClick:function(){n<r&&t(n+1)}}))}}]),t}(a.Component),ne=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.image,n=e.count,a=e.name,r=e.onChangeCount;return t?i.a.createElement(i.a.Fragment,null,i.a.createElement(X.a,{src:t}),i.a.createElement("br",null),i.a.createElement(te,{min:0,max:12,value:n,onChange:r})):i.a.createElement(i.a.Fragment,null,a,i.a.createElement("br",null),i.a.createElement(te,{min:0,max:12,value:n,onChange:r}))}}]),t}(a.Component),ae=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).onChangeCount=e.onChangeCount.bind(Object(d.a)(e)),e}return Object(f.a)(t,e),Object(l.a)(t,[{key:"onChangeCount",value:function(e,t){var n=this.props,a=n.definitions,i=n.onChangeCount;i(a.get(e),t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.dicePool,a=t.definitions,r=n.diceCounts,o=r.slice();return i.a.createElement(U.a,{columns:r.length,divided:!0,style:{height:40}},i.a.createElement(U.a.Row,null,o.map(function(t,n){var r=t.name,o=t.count,c=a.get(r).image;return i.a.createElement(U.a.Column,{key:"die".concat(n)},i.a.createElement(ne,{image:c,name:r,count:o,onChangeCount:function(t){e.onChangeCount(r,t-o)}}))})))}}]),t}(a.Component);var ie=Object(c.b)(function(e){return{dicePool:e.dicePoolStore.currentDicePool,definitions:e.diceDefinitionStore.definitions}},function(e){return{onChangeCount:function(t,n){return n>=1?e(K(t,n)):n<0?e(Q(t,n)):void 0}}})(ae),re=n(32),oe=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).call(this))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.probabilities,n=e.cumulativeProbabilities,a="cumulative"===e.mode?n:t,r=Array.from(a.keys()).map(function(e){return e}),o=r.sort(function(e,t){return e<t?-1:1}).map(function(e){return{x:e,y:100*a.get(e)}}),c=r.sort(function(e,t){return e<t?-1:1}).map(function(e){var t=a.get(e);return{x:e,y:100*(t+.1),xOffset:20,label:"".concat((100*t).toFixed(1),"%")}});return i.a.createElement(i.a.Fragment,null,i.a.createElement(re.f,{yType:"linear",xType:"ordinal",height:300,width:1200},i.a.createElement(re.b,{animation:!0,allowOffsetToBeReversed:!0,data:c}),i.a.createElement(re.e,{orientation:"bottom"}),i.a.createElement(re.g,null),i.a.createElement(re.a,null),i.a.createElement(re.d,null),i.a.createElement(re.c,{colorType:"literal",data:o})))}}]),t}(a.Component);var ce=Object(c.b)(function(e){var t=e.statisticsStore;return{isCalculationCurrent:t.isCalculationCurrent,probabilities:t.probabilities,cumulativeProbabilities:t.cumulativeProbabilities,mode:t.mode}},function(e){return{onRequestRecalculate:function(){return e(q())}}})(oe);n(300);var ue=function(){return i.a.createElement("div",null,i.a.createElement(ce,null),i.a.createElement(ie,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=n(36),le=function(){var e=G(),t=e.dicePools;return{dicePools:t,currentDicePoolName:e.currentName,currentDicePool:t.get(e.currentName)}};var me={isCalculationCurrent:!1,probabilities:new Map,cumulativeProbabilities:new Map,mode:"cumulative"};var he="ADD_DEFINITION",de="MODIFY_DEFINITION",fe="DELETE_DEFINITION",ve=function(){return{definitions:G().diceDefinitions}};var be=Object(se.c)({dicePoolStore:function(e,t){switch(void 0===e&&(e=le()),t.type){case H:return Object(v.a)({},e,{currentDicePoolName:t.name,currentDicePool:e.dicePools.get(t.name)});case Y:var n=e.currentDicePool.clone();n.addDice(t.definition,t.count);var a=new Map(e.dicePools);return a.set(e.currentDicePoolName,n),Object(v.a)({},e,{currentDicePool:n,dicePools:a});case $:var i=e.currentDicePool.clone();i.removeDice(t.definition,t.count);var r=new Map(e.dicePools);return r.set(e.currentDicePoolName,i),Object(v.a)({},e,{currentDicePool:i,dicePools:r});default:return e}},diceDefinitionStore:function(e,t){switch(void 0===e&&(e=ve()),t.type){case he:case de:var n=new Map(e.definitions);return n.set(t.definition.name,t.definition),Object(v.a)({},e,{definitions:n});case fe:var a=e.dicePool.clone();a.removeDice(t.definition,t.count);var i=new Map(e.dicePools);return i.set(e.currentDicePoolName,a),Object(v.a)({},e,{currentDicePool:a,dicePools:i});default:return e}},statisticsStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0,n=Object(v.a)({},e);switch(t.type){case J:n.probabilities=t.probabilities,n.cumulativeProbabilities=t.cumulativeProbabilities,n.isCalculationCurrent=!0;break;case W:n=me}return n}}),pe=n(151);n.d(t,"store",function(){return ye});var ye=Object(se.d)(be,Object(se.a)(pe.a));o.a.render(i.a.createElement(c.a,{store:ye},i.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},90:function(e,t,n){e.exports=n.p+"static/media/d10.0480ec4a.svg"}},[[163,1,2]]]);
//# sourceMappingURL=main.d1767f9e.chunk.js.map