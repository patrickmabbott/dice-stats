(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,n,t){e.exports=t.p+"static/media/d10.0480ec4a.svg"},181:function(e,n,t){e.exports=t.p+"static/media/d4.47a22d03.svg"},182:function(e,n,t){e.exports=t.p+"static/media/perspective-dice-six.d746d684.svg"},183:function(e,n,t){e.exports=t.p+"static/media/dice-eight-faces-eight.6e85915b.svg"},184:function(e,n,t){e.exports=t.p+"static/media/d12.bfe5934e.svg"},185:function(e,n,t){e.exports=t.p+"static/media/dice-twenty-faces-twenty.aeb518c5.svg"},186:function(e,n,t){e.exports=t.p+"static/media/rolling-dices.79d6d7d5.svg"},209:function(e,n,t){e.exports=t(388)},214:function(e,n,t){},387:function(e,n,t){},388:function(e,n,t){"use strict";t.r(n);var a=t(1),i=t.n(a),r=t(27),o=t.n(r),c=(t(214),t(55)),u=t(65),s=t(8),l=t(9),m=t(23),h=t(20),d=t(51),f=t(24),v=t(18),b=function(){function e(n){var t=n.dieType,a=n.explodeThreshold,i=n.name,r=n.image;Object(s.a)(this,e),this.dieType=t,this.name=i,this.image=r,this.explodeThreshold=a,this.clone=this.clone.bind(this),this.roll=this.roll.bind(this),this.countFaces=this.countFaces.bind(this),this.getNumFaces=this.getNumFaces.bind(this)}return Object(l.a)(e,[{key:"clone",value:function(){return new e({dieType:this.dieType,explodeThreshold:this.explodeThreshold,name:this.name,image:this.image})}},{key:"roll",value:function(){return new Error("Not implemented")}},{key:"countFaces",value:function(){return new Error("Not implemented")}},{key:"getNumFaces",value:function(){return Array.from(this.countFaces().values()).reduce(function(e,n){return e+n},0)}}]),e}();function p(e,n){return null===e||void 0===e?n:e}var y=function(){function e(n){var t=n.primaryValue,a=n.secondaryValues,i=n.name;Object(s.a)(this,e),this.primaryValue=p(t,[]),this.secondaryValues=p(a,[]),this.name=void 0===i&&void 0!==t?t.toString():i,this.clone=this.clone.bind(this)}return Object(l.a)(e,[{key:"clone",value:function(){return new e({primaryValue:this.primaryValue,secondaryValues:this.secondaryValues.map(function(e){return e.clone()}),name:this.name})}}]),e}(),O=function(){function e(n){var t=n.dieFace,a=n.count;Object(s.a)(this,e),this.dieFace=t,this.count=a,this.clone=this.clone.bind(this)}return Object(l.a)(e,[{key:"clone",value:function(){return new e({dieFace:this.dieFace.clone(),count:this.count})}}]),e}();function g(e,n){return Math.floor(Math.random(n-e+1))+e}var w=t(180),j=t.n(w),C=t(181),E=t.n(C),D=t(182),P=t.n(D),V=t(183),x=t.n(V),k=t(124),S=t.n(k),T=t(184),F=t.n(T),M=t(185),N=t.n(M),I=t(186),A=t.n(I),_=function(e){function n(e){var t;Object(s.a)(this,n),t=Object(m.a)(this,Object(h.a)(n).call(this,Object(v.a)({dieType:"numeric"},e)));var a=e.minValue,i=e.maxValue,r=e.numSides;if(r?(t.minValue=1,t.maxValue=r):(t.minValue=a,t.maxValue=i),void 0===e.name&&(t.name="d".concat(t.maxValue)),!t.image)switch(t.maxValue){case 4:t.image=E.a;break;case 6:t.image=P.a;break;case 8:t.image=x.a;break;case 10:case 100:t.image=S.a;break;case 12:t.image=F.a;break;case 20:t.image=N.a;break;default:t.image=A.a}return t}return Object(f.a)(n,e),Object(l.a)(n,[{key:"clone",value:function(){return new n({minValue:this.minValue,maxValue:this.maxValue,numSides:this.numSides,explodeThreshold:this.explodeThreshold,name:this.name})}},{key:"roll",value:function(){var e=g(this.minValue,this.maxValue);return new y({primaryValue:e})}},{key:"countFaces",value:function(){var e=new Map;return j.a.range(this.minValue,this.maxValue+1).forEach(function(n){var t=new y({primaryValue:n});e.has(t.name)?e.get(t.name).count++:e.set(t.name,new O({dieFace:t,count:1}))}),e}},{key:"getNumFaces",value:function(){return this.maxValue-this.minValue+1}}]),n}(b),B=function(e){function n(e){var t;Object(s.a)(this,n),t=Object(m.a)(this,Object(h.a)(n).call(this,e));var a=e.threshold;return t.threshold=a,t.clone=t.clone.bind(Object(d.a)(t)),t}return Object(f.a)(n,e),Object(l.a)(n,[{key:"clone",value:function(){return new n({minValue:this.minValue,maxValue:this.maxValue,numSides:this.numSides,explodeThreshold:this.explodeThreshold,name:this.name,threshold:this.threshold})}},{key:"roll",value:function(){var e=g(this.minValue,this.maxValue)>=this.threshold?1:0;return new y({primaryValue:e})}},{key:"enumerateFaces",value:function(){var e=new Map,n=this.maxValue-this.threshold+1,t=this.threshold-this.minValue,a=new y({primaryValue:1}),i=new y({primaryValue:0});return e.set(a.name,n),e.set(i.name,t),e}}]),n}(_),R=function(){function e(n){var t=n.name,a=n.count;Object(s.a)(this,e),this.name=t,this.count=a,this.clone=this.clone.bind(this)}return Object(l.a)(e,[{key:"clone",value:function(){return new e({name:this.name,count:this.count})}}]),e}(),L=function(){function e(n){var t=n.diceCounts,a=n.staticBonus,i=n.staticSecondaryBonuses,r=n.name;Object(s.a)(this,e),this.staticBonus=p(a,0),this.staticSecondaryBonuses=i,this.name=r,this.diceCounts=t.slice(),this.addDice=this.addDice.bind(this),this.removeDice=this.removeDice.bind(this),this.clone=this.clone.bind(this)}return Object(l.a)(e,[{key:"addDice",value:function(e,n){n=p(n,1);var t=this.diceCounts.find(function(n){return n.name===e.name}),a=(t?t.count:0)+n;t?t.count++:this.diceCounts.push(new R({name:e.name,count:a}))}},{key:"removeDice",value:function(e,n){var t=this.diceCounts.find(function(n){return n.name===e.name}),a=(t?t.count:0)-n;t?t.count=a:this.diceCounts.push(new R({name:e.name,count:a}))}},{key:"clone",value:function(){return new e({diceCounts:this.diceCounts.slice(),staticBonus:this.staticBonus,staticSecondaryBonuses:this.staticSecondaryBonuses,name:this.name})}}]),e}(),J=t(200),W=(t(220),"SET_STATISTICS"),q="RESET_STATISTICS";function H(){return function(e){var n=ye.getState(),t=function(e,n){var t,a=e.diceCounts;if(0===a.length)throw new Error("Attempting to calculate probabilities with no dice");return a.filter(function(e){var t=e.count,a=e.name;return t>0&&n.has(a)}).reduce(function(e,t){var a=t.count,i=t.name,r=n.get(i);return e.concat(new Array(a).fill(r))},[]).forEach(function(e,n){var a=new Map,i=e.countFaces(),r=e.getNumFaces();if(0===n){var o=!0,c=!1,u=void 0;try{for(var s,l=i.values()[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var m=s.value,h=m.count,d=m.dieFace.primaryValue;a.set(d,h/r),0}}catch(F){c=!0,u=F}finally{try{o||null==l.return||l.return()}finally{if(c)throw u}}}else{var f=!0,v=!1,b=void 0;try{for(var p,y=t.entries()[Symbol.iterator]();!(f=(p=y.next()).done);f=!0){var O=p.value,g=Object(J.a)(O,2),w=g[0],j=g[1],C=!0,E=!1,D=void 0;try{for(var P,V=i.values()[Symbol.iterator]();!(C=(P=V.next()).done);C=!0){var x=P.value;h=x.count,d=x.dieFace.primaryValue,0;var k=w+d,S=j*(h/r),T=a.get(k)||0;a.set(k,T+S)}}catch(F){E=!0,D=F}finally{try{C||null==V.return||V.return()}finally{if(E)throw D}}}}catch(F){v=!0,b=F}finally{try{f||null==y.return||y.return()}finally{if(v)throw b}}}t=a}),t}(n.dicePoolStore.currentDicePool,n.diceDefinitionStore.definitions);if(void 0!==t){var a=Array.from(t.keys()).sort(function(e,n){return e<n?-1:e>n?1:0}).reverse(),i=new Map;return a.reduce(function(e,n){var a=t.get(n)+e;return i.set(n,a),a},0),e(function(e,n){return{type:W,probabilities:e,cumulativeProbabilities:n}}(t,i))}}}var Y="CHOOSE_POOL_NAME",$="ADD_DIE_TO_POOL",z="REMOVE_DIE_FROM_POOL";function G(){var e=function(){var e=new Map;return e=new Map([].concat(Object(u.a)(e),Object(u.a)(function(){var e=new Map,n=new B({name:"ArkhamDie",numSides:6,threshold:5});e.set(n.name,n);var t=new B({name:"ArkhamCurseDie",numSides:6,threshold:6});e.set(t.name,t);var a=new B({name:"ArkhamBlessDie",numSides:6,threshold:4});return e.set(a.name,a),e}()))),e=new Map([].concat(Object(u.a)(e),Object(u.a)(function(){var e=new Map;return[4,6,8,10,12,20,100].forEach(function(n){var t=new _({numSides:n});e.set(t.name,t)}),e}())))}(),n=new Map,t=function(){var e=[4,6,8,10,12,20].map(function(e){return{count:0,name:"d".concat(e)}});return new L({diceCounts:e,name:"D&D"})}();n.set(t.name,t);var a=function(e){var n=Array.from(e.values()).filter(function(e){return e.name.includes("Arkham")}).map(function(e){return{name:e.name,count:0}});return new L({diceCounts:n,name:"Arkham"})}(e);return n.set(a.name,a),{diceDefinitions:e,dicePools:n,currentName:t.name}}function K(e,n){return function(t){return Promise.resolve(t(function(e,n){return{type:$,definition:e,count:n}}(e,n))).then(function(){t(H())})}}function Q(e,n){return function(t){return Promise.resolve(t(function(e,n){return{type:z,definition:e,count:n}}(e,Math.abs(n)))).then(function(){t(H())})}}var U=t(392),X=(t(66),t(391)),Z=t(187),ee=t.n(Z),ne=t(199),te=(t(263),function(e){function n(){return Object(s.a)(this,n),Object(m.a)(this,Object(h.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this.props,n=e.image,t=e.count,a=e.name,r=e.onChangeCount;return n?i.a.createElement(i.a.Fragment,null,i.a.createElement(X.a,{src:n}),i.a.createElement("br",null),i.a.createElement(ne.a,{min:0,max:100,value:t,onChange:r})):i.a.createElement(i.a.Fragment,null,a,i.a.createElement("br",null),i.a.createElement(ee.a,{min:0,max:100,value:t,onChange:r}))}}]),n}(a.Component)),ae=function(e){function n(){var e;return Object(s.a)(this,n),(e=Object(m.a)(this,Object(h.a)(n).call(this))).onChangeCount=e.onChangeCount.bind(Object(d.a)(e)),e}return Object(f.a)(n,e),Object(l.a)(n,[{key:"onChangeCount",value:function(e,n){var t=this.props,a=t.definitions,i=t.onChangeCount;i(a.get(e),n)}},{key:"render",value:function(){var e=this,n=this.props,t=n.dicePool,a=n.definitions,r=t.diceCounts,o=r.slice();return i.a.createElement(U.a,{columns:r.length,divided:!0,style:{height:40}},i.a.createElement(U.a.Row,null,o.map(function(n,t){var r=n.name,o=n.count,c=a.get(r).image;return i.a.createElement(U.a.Column,{key:"die".concat(t)},i.a.createElement(te,{image:c,name:r,count:o,onChangeCount:function(n){e.onChangeCount(r,n-o)}}))})))}}]),n}(a.Component);var ie=Object(c.b)(function(e){return{dicePool:e.dicePoolStore.currentDicePool,definitions:e.diceDefinitionStore.definitions}},function(e){return{onChangeCount:function(n,t){return t>=1?e(K(n,t)):t<0?e(Q(n,t)):void 0}}})(ae),re=t(36),oe=function(e){function n(){return Object(s.a)(this,n),Object(m.a)(this,Object(h.a)(n).call(this))}return Object(f.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this.props,n=e.probabilities,t=e.cumulativeProbabilities,a="cumulative"===e.mode?t:n,r=Array.from(a.keys()).map(function(e){return e}),o=r.sort(function(e,n){return e<n?-1:1}).map(function(e){return{x:e,y:100*a.get(e)}}),c=r.sort(function(e,n){return e<n?-1:1}).map(function(e){var n=a.get(e);return{x:e,y:100*(n+.1),xOffset:20,label:"".concat((100*n).toFixed(1),"%")}});return i.a.createElement(i.a.Fragment,null,i.a.createElement(re.f,{yType:"linear",xType:"ordinal",height:300,width:1200},i.a.createElement(re.b,{animation:!0,allowOffsetToBeReversed:!0,data:c}),i.a.createElement(re.e,{orientation:"bottom"}),i.a.createElement(re.g,null),i.a.createElement(re.a,null),i.a.createElement(re.d,null),i.a.createElement(re.c,{colorType:"literal",data:o})))}}]),n}(a.Component);var ce=Object(c.b)(function(e){var n=e.statisticsStore;return{isCalculationCurrent:n.isCalculationCurrent,probabilities:n.probabilities,cumulativeProbabilities:n.cumulativeProbabilities,mode:n.mode}},function(e){return{onRequestRecalculate:function(){return e(H())}}})(oe);t(387);var ue=function(){return i.a.createElement("div",null,i.a.createElement(ce,null),i.a.createElement(ie,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=t(42),le=function(){var e=G(),n=e.dicePools;return{dicePools:n,currentDicePoolName:e.currentName,currentDicePool:n.get(e.currentName)}};var me={isCalculationCurrent:!1,probabilities:new Map,cumulativeProbabilities:new Map,mode:"cumulative"};var he="ADD_DEFINITION",de="MODIFY_DEFINITION",fe="DELETE_DEFINITION",ve=function(){return{definitions:G().diceDefinitions}};var be=Object(se.c)({dicePoolStore:function(e,n){switch(void 0===e&&(e=le()),n.type){case Y:return Object(v.a)({},e,{currentDicePoolName:n.name,currentDicePool:e.dicePools.get(n.name)});case $:var t=e.currentDicePool.clone();t.addDice(n.definition,n.count);var a=new Map(e.dicePools);return a.set(e.currentDicePoolName,t),Object(v.a)({},e,{currentDicePool:t,dicePools:a});case z:var i=e.currentDicePool.clone();i.removeDice(n.definition,n.count);var r=new Map(e.dicePools);return r.set(e.currentDicePoolName,i),Object(v.a)({},e,{currentDicePool:i,dicePools:r});default:return e}},diceDefinitionStore:function(e,n){switch(void 0===e&&(e=ve()),n.type){case he:case de:var t=new Map(e.definitions);return t.set(n.definition.name,n.definition),Object(v.a)({},e,{definitions:t});case fe:var a=e.dicePool.clone();a.removeDice(n.definition,n.count);var i=new Map(e.dicePools);return i.set(e.currentDicePoolName,a),Object(v.a)({},e,{currentDicePool:a,dicePools:i});default:return e}},statisticsStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,n=arguments.length>1?arguments[1]:void 0,t=Object(v.a)({},e);switch(n.type){case W:t.probabilities=n.probabilities,t.cumulativeProbabilities=n.cumulativeProbabilities,t.isCalculationCurrent=!0;break;case q:t=me}return t}}),pe=t(198);t.d(n,"store",function(){return ye});var ye=Object(se.d)(be,Object(se.a)(pe.a));o.a.render(i.a.createElement(c.a,{store:ye},i.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[209,1,2]]]);
//# sourceMappingURL=main.ce917ade.chunk.js.map